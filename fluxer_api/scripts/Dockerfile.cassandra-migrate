FROM node:24-bookworm-slim

WORKDIR /app

RUN corepack enable && corepack prepare pnpm@10.26.0 --activate

RUN echo '{"type":"module","dependencies":{"cassandra-driver":"4.8.0","tsx":"4.21.0"}}' > package.json && \
    pnpm install

COPY fluxer_api/scripts/CassandraMigrate.tsx ./scripts/
COPY fluxer_api/tsconfig.json ./

ENTRYPOINT ["npx", "tsx", "scripts/CassandraMigrate.tsx"]
