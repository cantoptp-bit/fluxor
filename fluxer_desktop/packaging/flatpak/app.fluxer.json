{
	"id": "app.fluxer",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "24.08",
	"sdk": "org.freedesktop.Sdk",
	"base": "org.electronjs.Electron2.BaseApp",
	"base-version": "24.08",
	"command": "fluxer",
	"separate-locales": false,
	"finish-args": [
		"--share=ipc",
		"--share=network",
		"--socket=x11",
		"--socket=wayland",
		"--socket=pulseaudio",
		"--device=all",
		"--talk-name=org.freedesktop.Notifications",
		"--talk-name=org.kde.StatusNotifierWatcher",
		"--talk-name=org.freedesktop.secrets",
		"--filesystem=xdg-run/pipewire-0",
		"--env=XCURSOR_PATH=/run/host/user-share/icons:/run/host/share/icons"
	],
	"modules": [
		{
			"name": "fluxer",
			"buildsystem": "simple",
			"build-commands": [
				"install -d /app/lib/fluxer",
				"cp -r ./* /app/lib/fluxer/",
				"chmod +x /app/lib/fluxer/fluxer",
				"install -Dm644 /app/lib/fluxer/resources/app.asar.unpacked/node_modules/electron/dist/chrome-sandbox /app/lib/fluxer/chrome-sandbox || true",
				"install -d /app/bin",
				"ln -s /app/lib/fluxer/fluxer /app/bin/fluxer",
				"install -Dm644 app.fluxer.metainfo.xml /app/share/metainfo/app.fluxer.metainfo.xml",
				"install -Dm644 app.fluxer.desktop /app/share/applications/app.fluxer.desktop",
				"install -Dm644 icon-256.png /app/share/icons/hicolor/256x256/apps/app.fluxer.png"
			],
			"sources": [
				{
					"type": "archive",
					"only-arches": ["x86_64"],
					"url": "https://api.fluxer.app/dl/desktop/stable/linux/x64/latest/tar_gz",
					"sha256": "PLACEHOLDER_SHA256_X64",
					"x-checker-data": {
						"type": "json",
						"url": "https://api.fluxer.app/dl/desktop/stable/linux/x64/latest",
						"version-query": ".version",
						"url-query": ".files.tar_gz.url"
					}
				},
				{
					"type": "archive",
					"only-arches": ["aarch64"],
					"url": "https://api.fluxer.app/dl/desktop/stable/linux/arm64/latest/tar_gz",
					"sha256": "PLACEHOLDER_SHA256_ARM64",
					"x-checker-data": {
						"type": "json",
						"url": "https://api.fluxer.app/dl/desktop/stable/linux/arm64/latest",
						"version-query": ".version",
						"url-query": ".files.tar_gz.url"
					}
				},
				{
					"type": "file",
					"path": "app.fluxer.metainfo.xml"
				},
				{
					"type": "file",
					"path": "app.fluxer.desktop"
				},
				{
					"type": "file",
					"path": "icon-256.png"
				}
			]
		}
	]
}
